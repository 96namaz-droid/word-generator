# Инструкция по отладке веб-версии

## Быстрая отладка

### 1. Запустите веб-сервер
```bash
python start_web.py
```

### 2. В другом окне терминала запустите просмотр логов
```bash
python view_logs.py -f
```
или просто:
```bash
view_logs.bat
```

### 3. Откройте браузер
Откройте http://localhost:8000 и попробуйте сгенерировать отчет

### 4. Смотрите логи в реальном времени
В окне с `view_logs.py` вы увидите все детальные логи:
- Какие данные приходят на сервер
- Какие этапы валидации проходят
- Где именно происходит ошибка
- Детальный traceback при ошибках

## Что логируется

### На стороне клиента (браузер)
Откройте консоль разработчика (F12 → Console) и увидите:
- ✅ Собранные данные формы
- ✅ Результат валидации
- ✅ Статус генерации
- ❌ Детальные ошибки

### На стороне сервера
В лог-файле `work_data/logs/app.log`:
- ✅ Все запросы с деталями
- ✅ Процесс валидации по шагам
- ✅ Процесс генерации документа
- ❌ Полные traceback при ошибках

## Типичные проблемы

### 1. Поля не заполнены
**В логах будет:**
```
[VALIDATOR] Ошибка даты: ...
[VALIDATOR] Ошибка заказчика: ...
```
**Решение:** Заполните все обязательные поля

### 2. Ошибка валидации протокола
**В логах будет:**
```
[VALIDATOR] Ошибок в протоколе: X
[VALIDATOR] Список ошибок: [...]
```
**Решение:** Проверьте заполнение полей для выбранного типа протокола

### 3. Ошибка генерации документа
**В логах будет:**
```
ОШИБКА в create_document: ...
Traceback:
  ...
```
**Решение:** Смотрите traceback - он покажет точное место ошибки

## Просмотр последних ошибок

```bash
python view_logs.py
```
Покажет последние 50 строк лога без отслеживания.

